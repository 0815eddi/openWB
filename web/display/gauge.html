<html>
<script src="/openWB/web/display/gauge.min.js"></script>
<script src="/openWB/web/js/jquery-1.11.1.min.js"></script>
<script src="/openWB/web/display/alllive.js"></script>
<link rel="stylesheet" type="text/css" href="/openWB/web/css/bootstrap.css">


  <link href="../fonts/font-awesome-5.8.2/css/all.css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="../fonts/eleganticons/et-icons.css">
	<link rel="stylesheet" type="text/css" href="../css/cardio.css">


<style>
body {
background-color: black;
}
</style>

<body>
<canvas id="evu" style="height: 200px; top: -50px; left: 0px; position: absolute; width: 265px;"></canvas>
<div id="evut" style="font-size: 15px; height: 200px; top: 100px; left: 0px; position: absolute; width: 265px; color: white; text-align:center;">0%</div>
<div style="font-size: 15px; height: 200px; top: 75px; left: 0px; text-align:center; position: absolute; width: 265px; color: white;">EVU</div>

<canvas id="pv" style="height: 200px; top: -50px; left: 265px; position: absolute; width: 265px;"></canvas>
<div id="pvt" style="font-size: 15px; height: 200px; top: 100px; left: 265px; text-align:center; position: absolute; width: 265px; color: white;">0%</div>
<div style="font-size: 15px; height: 200px; top: 75px; left: 265px; text-align:center; position: absolute; width: 265px; color: white;">PV</div>

<canvas id="speicher" style="height: 200px; top: -50px; left: 530px; position: absolute; width: 265px;"></canvas>
<div id="speichert" style="font-size: 15px; height: 200px; top: 100px; left: 530px; text-align:center; position: absolute; width: 265px; color: white;">0%</div>
<div style="font-size: 15px; height: 200px; top: 75px; left: 530px; text-align:center; position: absolute; width: 265px; color: white;">Speicher</div>
<canvas id="speichers" style="height: 200px; top: -50px; left: 530px; position: absolute; width: 265px;"></canvas>
<div id="speicherst" style="15px; height: 100px; top: 60px; left: 530px; text-align:center; position: absolute; width: 265px; color: white;"></div>


<canvas id="haus" style="height: 200px; top: 120px; left: 0px; position: absolute; width: 265px;"></canvas>
<div id="haust" style="font-size: 15px; height: 200px; top: 270px; left: 0px; text-align:center; position: absolute; width: 265px; color: white;">0%</div>
<div style="font-size: 15px; height: 200px; top: 250px; left: 0px; text-align:center; position: absolute; width: 265px; color: white;">Hausverbrauch</div>

<canvas id="lp1" style="height: 200px; top: 120px; left: 265px; position: absolute; width: 265px;"></canvas>
<div id="lp1t" style="font-size: 15px; height: 200px; top: 270px; left: 265px; text-align:center; position: absolute; width: 265px; color: white;">0%</div>
<div style="font-size: 15px; height: 200px; top: 250px; left: 265px; text-align:center; position: absolute; width: 265px; color: white;">LP1</div>
<canvas id="lp1s" style="height: 200px; top: 120px; left: 265px; position: absolute; width: 265px;"></canvas>
<div id="lp1st" style="font-size: 15px; height: 200px; top: 230px; left: 265px; text-align:center; position: absolute; width: 265px; color: white;">0%</div>


<canvas id="lp2" style="height: 200px; top: 120px; left: 530px; position: absolute; width: 265px;"></canvas>

<div id="lp2t" style="15px; height: 100px; top: 270px; left: 530px; text-align:center; position: absolute; width: 265px; color: white;"></div>
<div style="font-size: 15px; height: 100px; top: 250px; left: 530px; text-align:center; position: absolute; width: 265px; color: white;">LP2</div>
<canvas id="lp2s" style="height: 200px; top: 120px; left: 530px; position: absolute; width: 265px;"></canvas>
<div id="lp2st" style="15px; height: 100px; top: 230px; left: 530px; text-align:center; position: absolute; width: 265px; color: white;"></div>


<div class="row">
<div class="container" style="left:20px;bottom:0px;position:absolute;">
	<div class="col-xs-3 text-center">
		<div class="actstat">
			<a href="./tools/changelademodusd.php?jetzt=1" class="btn btn-lg btn-block" style="font-size: 2vw">Sofort Laden</a>
		</div>
	</div>

	<div class="col-xs-2 text-center">
		<div class="actstat4">
			<a href="./tools/changelademodusd.php?semistop=1" class="btn btn-lg btn-block" style="font-size: 2vw">Standby</a>
		</div>
	</div>
	<div class="col-xs-2 text-center">
		<div class="actstat3">
			<a href="./tools/changelademodusd.php?stop=1" class="btn btn-lg btn-block" style="font-size: 2vw">Stop</a>
		</div>
	</div>
	<div class="col-xs-2 text-center">
		<div class="actstat1">
			<a href="./tools/changelademodusd.php?minundpv=1" class="btn btn-lg btn-block" style="font-size: 2vw">Min + PV</a>
		</div>
	</div>
	<div class="col-xs-3 text-center">
		<div class="actstat2">
			<a href="./tools/changelademodusd.php?pvuberschuss=1" class="btn btn-lg btn-block" style="font-size: 2vw">Nur PV</a>
		</div>
	</div>
</div>

<script>
var opts = {
  angle: 0, // The span of the gauge arc
  lineWidth: 0.24, // The line thickness
  radiusScale: 0.67, // Relative radius
  pointer: {
    length: 0.6, // // Relative to gauge radius
    strokeWidth: 0.1, // The thickness
    color: '#000000' // Fill color
  },
  limitMax: true,     // If false, max value increases automatically if value > maxValue
  limitMin: true,     // If true, the min value of the gauge will be fixed
  //colorStart: 'green',   // Colors
  //colorStop: 'red',    // just experiment with them
  strokeColor: 'grey',  // to see which ones work best for you
  percentColors: [[0.0, "#00FF00" ], [1.0, "#FF0000"]],
  generateGradient: true,
		staticLabels: {
		font: "13px sans-serif",  // Specifies font
		labels: [-15000, -7500, 0, 7500, 15000],  // Print labels at these values
		color: "#FFFFFF",  // Optional: Label text color
		fractionDigits: 0  // Optional: Numerical precision. 0=round off.
		},
	       staticZones: [
	          {strokeStyle: "#F03E3E", min: 5000, max: 15000}, // Red from 100 to 130
      {strokeStyle: "#FFDD00", min: 0, max: 5000}, // Yellow
   {strokeStyle: "#30B32D", min: -15000, max: 0}, // Green
],  
};
var target = document.getElementById('evu'); // your canvas element
var gauge = new Gauge(target).setOptions(opts); // create sexy gauge!
gauge.maxValue = 15000; // set max gauge value
gauge.setMinValue(-15000);  // Prefer setter over gauge.minValue = 0
gauge.animationSpeed = 50; // set animation speed (32 is default value)

gauge.set(10000); // set actual value
////////////////////////////
var opts = {
  angle: 0, // The span of the gauge arc
  lineWidth: 0.24, // The line thickness
  radiusScale: 0.67, // Relative radius
  pointer: {
    length: 0.6, // // Relative to gauge radius
    strokeWidth: 0, // The thickness
    color: '#000000' // Fill color
  },
  limitMax: false,     // If false, max value increases automatically if value > maxValue
  limitMin: false,     // If true, the min value of the gauge will be fixed
  colorStart: 'green',   // Colors
  colorStop: 'green',    // just experiment with them
  strokeColor: 'grey',  // to see which ones work best for you
  percentColors: [[0.0, "#20610f" ], [1.0, "#00FF00"]],
  generateGradient: true,
		staticLabels: {
		font: "13px sans-serif",  // Specifies font
		labels: [0, 10000],  // Print labels at these values
		color: "white",  // Optional: Label text color
		fractionDigits: 0  // Optional: Numerical precision. 0=round off.
		}, 
};
var targetpv = document.getElementById('pv'); // your canvas element
var gaugepv = new Gauge(targetpv).setOptions(opts); // create sexy gauge!
gaugepv.maxValue = 10000; // set max gauge value
gaugepv.setMinValue(0);  // Prefer setter over gauge.minValue = 0
gaugepv.animationSpeed = 50; // set animation speed (32 is default value)
gaugepv.set(10000); // set actual value
////////////////////////
var opts = {
  angle: 0, // The span of the gauge arc
  lineWidth: 0.24, // The line thickness
  radiusScale: 0.67, // Relative radius
  pointer: {
    length: 0.6, // // Relative to gauge radius
    strokeWidth: 0.1, // The thickness
    color: '#000000' // Fill color
  },
  limitMax: true,     // If false, max value increases automatically if value > maxValue
  limitMin: true,     // If true, the min value of the gauge will be fixed
  colorStart: '#6FADCF',   // Colors
  colorStop: '#8FC0DA',    // just experiment with them
  strokeColor: 'grey',  // to see which ones work best for you
 percentColors: [[0.0, "#FF0000" ], [0.5, "#FFFF00"],[1.0, "#00FF00"]],
  generateGradient: true,
		staticLabels: {
		font: "13px sans-serif",  // Specifies font
		labels: [-4000, -1500, 0, 1500, 4000],  // Print labels at these values
		color: "white",  // Optional: Label text color
		fractionDigits: 0  // Optional: Numerical precision. 0=round off.
		}, 
	       staticZones: [
	          {strokeStyle: "#F03E3E", min: -4000, max: -300}, // Red from 100 to 130
      {strokeStyle: "#FFDD00", min: -300, max: 0}, // Yellow
   {strokeStyle: "#30B32D", min: 0, max: 4000}, // Green
],  
};
var targetspeicher = document.getElementById('speicher'); // your canvas element
var gaugespeicher = new Gauge(targetspeicher).setOptions(opts); // create sexy gauge!
gaugespeicher.maxValue = 4000; // set max gauge value
gaugespeicher.setMinValue(-4000);  // Prefer setter over gauge.minValue = 0
gaugespeicher.animationSpeed = 50; // set animation speed (32 is default value)
gaugespeicher.set(1000); // set actual value
///////////////////
var opts = {
  angle: 0, // The span of the gauge arc
  lineWidth: 0.08, // The line thickness
  radiusScale: 0.5, // Relative radius
  pointer: {
    length: 0.6, // // Relative to gauge radius
    strokeWidth: 0, // The thickness
    color: '#000000' // Fill color
  },
  limitMax: false,     // If false, max value increases automatically if value > maxValue
  limitMin: false,     // If true, the min value of the gauge will be fixed
  colorStart: '#6FADCF',   // Colors
  colorStop: '#8FC0DA',    // just experiment with them
  strokeColor: 'grey',  // to see which ones work best for you
  generateGradient: true,
percentColors: [[0.0, "#73c0FF" ], [1.0, "#0000FF"]],
		staticLabels: {
		font: "13px sans-serif",  // Specifies font
		labels: [0, 100],  // Print labels at these values
		color: "white",  // Optional: Label text color
		fractionDigits: 0  // Optional: Numerical precision. 0=round off.
		}, 
};
var targetspeichers = document.getElementById('speichers'); // your canvas element
var gaugespeichers = new Gauge(targetspeichers).setOptions(opts); // create sexy gauge!
gaugespeichers.maxValue = 100; // set max gauge value
gaugespeichers.setMinValue(0);  // Prefer setter over gauge.minValue = 0
gaugespeichers.animationSpeed = 50; // set animation speed (32 is default value)
gaugespeichers.set(70); // set actual value


////////////////////
var opts = {
  angle: 0, // The span of the gauge arc
  lineWidth: 0.24, // The line thickness
  radiusScale: 0.67, // Relative radius
  pointer: {
    length: 0.6, // // Relative to gauge radius
    strokeWidth: 0, // The thickness
    color: '#000000' // Fill color
  },
  limitMax: false,     // If false, max value increases automatically if value > maxValue
  limitMin: false,     // If true, the min value of the gauge will be fixed
  colorStart: '#6FADCF',   // Colors
  colorStop: '#8FC0DA',    // just experiment with them
  strokeColor: 'grey',  // to see which ones work best for you
  generateGradient: true,
		staticLabels: {
		font: "13px sans-serif",  // Specifies font
		labels: [0, 4000, 8000],  // Print labels at these values
		color: "white",  // Optional: Label text color
		fractionDigits: 0  // Optional: Numerical precision. 0=round off.
		}, 
};
var targethaus = document.getElementById('haus'); // your canvas element
var gaugehaus = new Gauge(targethaus).setOptions(opts); // create sexy gauge!
gaugehaus.maxValue = 8000; // set max gauge value
gaugehaus.setMinValue(0);  // Prefer setter over gauge.minValue = 0
gaugehaus.animationSpeed = 50; // set animation speed (32 is default value)
gaugehaus.set(500); // set actual value
/////////////////////////
var opts = {
  angle: 0, // The span of the gauge arc
  lineWidth: 0.24, // The line thickness
  radiusScale: 0.67, // Relative radius
  pointer: {
    length: 0.6, // // Relative to gauge radius
    strokeWidth: 0, // The thickness
    color: '#000000' // Fill color
  },
  limitMax: false,     // If false, max value increases automatically if value > maxValue
  limitMin: false,     // If true, the min value of the gauge will be fixed
  colorStart: '#6FADCF',   // Colors
  colorStop: '#8FC0DA',    // just experiment with them
  strokeColor: 'grey',  // to see which ones work best for you
  generateGradient: true,
percentColors: [[0.0, "#73c0FF" ], [1.0, "#0000FF"]],
		staticLabels: {
		font: "13px sans-serif",  // Specifies font
		labels: [0, 7000],  // Print labels at these values
		color: "white",  // Optional: Label text color
		fractionDigits: 0  // Optional: Numerical precision. 0=round off.
		}, 
};
var targetlp1 = document.getElementById('lp1'); // your canvas element
var gaugelp1 = new Gauge(targetlp1).setOptions(opts); // create sexy gauge!
gaugelp1.maxValue = 7000; // set max gauge value
gaugelp1.setMinValue(0);  // Prefer setter over gauge.minValue = 0
gaugelp1.animationSpeed = 50; // set animation speed (32 is default value)
gaugelp1.set(7000); // set actual value
/////////////////////////
var opts = {
  angle: 0, // The span of the gauge arc
  lineWidth: 0.08, // The line thickness
  radiusScale: 0.5, // Relative radius
  pointer: {
    length: 0.6, // // Relative to gauge radius
    strokeWidth: 0, // The thickness
    color: '#000000' // Fill color
  },
  limitMax: false,     // If false, max value increases automatically if value > maxValue
  limitMin: false,     // If true, the min value of the gauge will be fixed
  colorStart: '#6FADCF',   // Colors
  colorStop: '#8FC0DA',    // just experiment with them
  strokeColor: 'grey',  // to see which ones work best for you
  generateGradient: true,
percentColors: [[0.0, "#73c0FF" ], [1.0, "#0000FF"]],
		staticLabels: {
		font: "13px sans-serif",  // Specifies font
		labels: [0, 100],  // Print labels at these values
		color: "white",  // Optional: Label text color
		fractionDigits: 0  // Optional: Numerical precision. 0=round off.
		}, 
};
var targetlp1s = document.getElementById('lp1s'); // your canvas element
var gaugelp1s = new Gauge(targetlp1s).setOptions(opts); // create sexy gauge!
gaugelp1s.maxValue = 100; // set max gauge value
gaugelp1s.setMinValue(0);  // Prefer setter over gauge.minValue = 0
gaugelp1s.animationSpeed = 50; // set animation speed (32 is default value)
gaugelp1s.set(70); // set actual value
////////////////////
var opts = {
  angle: 0, // The span of the gauge arc
  lineWidth: 0.24, // The line thickness
  radiusScale: 0.67, // Relative radius
  pointer: {
    length: 0.6, // // Relative to gauge radius
    strokeWidth: 0, // The thickness
    color: '#000000' // Fill color
  },
  limitMax: false,     // If false, max value increases automatically if value > maxValue
  limitMin: false,     // If true, the min value of the gauge will be fixed
  colorStart: '#6FADCF',   // Colors
  colorStop: '#8FC0DA',    // just experiment with them
  strokeColor: 'grey',  // to see which ones work best for you
  generateGradient: true,
percentColors: [[0.0, "#73c0FF" ], [1.0, "#0000FF"]],

		staticLabels: {
		font: "13px sans-serif",  // Specifies font
		labels: [0, 7000],  // Print labels at these values
		color: "white",  // Optional: Label text color
		fractionDigits: 0  // Optional: Numerical precision. 0=round off.
		}, 
};
var targetlp2 = document.getElementById('lp2'); // your canvas element
var gaugelp2 = new Gauge(targetlp2).setOptions(opts); // create sexy gauge!
gaugelp2.maxValue = 7000; // set max gauge value
gaugelp2.setMinValue(0);  // Prefer setter over gauge.minValue = 0
gaugelp2.animationSpeed = 50; // set animation speed (32 is default value)
gaugelp2.set(3600); // set actual value
/////////////////////////
var opts = {
  angle: 0, // The span of the gauge arc
  lineWidth: 0.08, // The line thickness
  radiusScale: 0.5, // Relative radius
  pointer: {
    length: 0.6, // // Relative to gauge radius
    strokeWidth: 0, // The thickness
    color: '#000000' // Fill color
  },
  limitMax: false,     // If false, max value increases automatically if value > maxValue
  limitMin: false,     // If true, the min value of the gauge will be fixed
  colorStart: '#6FADCF',   // Colors
  colorStop: '#8FC0DA',    // just experiment with them
  strokeColor: 'grey',  // to see which ones work best for you
  generateGradient: true,
percentColors: [[0.0, "#73c0FF" ], [1.0, "#0000FF"]],
		staticLabels: {
		font: "13px sans-serif",  // Specifies font
		labels: [0, 100],  // Print labels at these values
		color: "white",  // Optional: Label text color
		fractionDigits: 0  // Optional: Numerical precision. 0=round off.
		}, 
};
var targetlp2s = document.getElementById('lp2s'); // your canvas element
var gaugelp2s = new Gauge(targetlp2s).setOptions(opts); // create sexy gauge!
gaugelp2s.maxValue = 100; // set max gauge value
gaugelp2s.setMinValue(0);  // Prefer setter over gauge.minValue = 0
gaugelp2s.animationSpeed = 50; // set animation speed (32 is default value)
gaugelp2s.set(70); // set actual value



var doInterval;
function getfile() {
	$.ajaxSetup({ cache: false});
 $.ajax({
    url: "/openWB/ramdisk/wattbezug",
    complete: function(request){
	    var wattbezug = request.responseText;
	    var intbezug = parseInt(wattbezug, 10);
	    gauge.set(wattbezug);
	    if (intbezug > 0) {
		    $("#evut").html(request.responseText + " W<br>Bezug");
	    } else {
		wattbezug = wattbezug * -1; 
		$("#evut").html(wattbezug + " W<br>Einspeisung");
   
	    };
    }
  });
 $.ajax({
    url: "/openWB/ramdisk/pvwatt",
    complete: function(request){
	    var pvwatt = request.responseText;
	    pvwatt = pvwatt * -1;
		gaugepv.set(pvwatt);
		$("#pvt").html(pvwatt + " W");
	
    }
  });
 $.ajax({
    url: "/openWB/ramdisk/speicherleistung",
    complete: function(request){
	    var speicherwatt = request.responseText;
		gaugespeicher.set(speicherwatt);
		if ( speicherwatt > 0) {
			$("#speichert").html(request.responseText + " W<br>Ladung");
		} else {
			speicherwatt = speicherwatt * -1;
			$("#speichert").html(speicherwatt + " W<br>Entladung");
		}


    }
  });
 $.ajax({
    url: "/openWB/ramdisk/speichersoc",
    complete: function(request){
	    var speichers = request.responseText;
		gaugespeichers.set(speichers);
		$("#speicherst").html(request.responseText + "%");
    }
  });
 $.ajax({
    url: "/openWB/ramdisk/hausverbrauch",
    complete: function(request){
	    var hausverbrauch = request.responseText;
		gaugehaus.set(hausverbrauch);
		$("#haust").html(request.responseText + " W");
    }
  });
 $.ajax({
    url: "/openWB/ramdisk/llaktuell",
    complete: function(request){
	    var lp1w = request.responseText;
		gaugelp1.set(lp1w);
		$("#lp1t").html(request.responseText + " W");
    }
  });
 $.ajax({
    url: "/openWB/ramdisk/llaktuells1",
    complete: function(request){
	    var lp2w = request.responseText;
		gaugelp2.set(lp2w);
		$("#lp2t").html(request.responseText + " W");

    }
  });
 $.ajax({
    url: "/openWB/ramdisk/soc",
    complete: function(request){
	    var lp1s = request.responseText;
		gaugelp1s.set(lp1s);
		$("#lp1st").html(request.responseText + "%");
    }
  });
 $.ajax({
    url: "/openWB/ramdisk/soc1",
    complete: function(request){
	    var lp2s = request.responseText;
		gaugelp2s.set(lp2s);
		$("#lp2st").html(request.responseText + "%");
    }
  });

}




doInterval = setInterval(getfile, 5000);
//setInterval(function(){gauge.set(wattbezug)}, 200)
	</script>




</body>
</html>
